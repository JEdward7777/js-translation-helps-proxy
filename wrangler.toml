name = "js-translation-helps-proxy"
main = "dist/esm/openai-api/index.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[vars]
# REQUIRED: Upstream Translation Helps API endpoint
UPSTREAM_URL = "https://translation-helps-mcp.pages.dev/api/mcp"

# OPTIONAL: Override defaults (uncomment to customize)
# LOG_LEVEL = "info"                    # Default: "info" (options: debug, info, warn, error)
# TIMEOUT = "30000"                     # Default: 30000ms
# OPENAI_FILTER_NOTES = "true"          # Default: true (filter book/chapter notes)
# OPENAI_MAX_ITERATIONS = "5"           # Default: 5 (max tool call iterations)
# OPENAI_ENABLED_TOOLS = "tool1,tool2"  # Default: all tools enabled
# OPENAI_HIDDEN_PARAMS = "language,org" # Default: none hidden

[build]
command = "npm run build"

# Routes configuration for CloudFlare Workers
# Uncomment and configure if deploying to a custom domain
# routes = [
#   { pattern = "translation-helps.example.com/*", zone_name = "example.com" }
# ]

# Development environment - separate worker with debug logging
[env.development]
name = "js-translation-helps-proxy-dev"
vars = { UPSTREAM_URL = "https://translation-helps-mcp.pages.dev/api/mcp", LOG_LEVEL = "debug" }

# Production environment - separate worker with info logging
[env.production]
name = "js-translation-helps-proxy-prod"
vars = { UPSTREAM_URL = "https://translation-helps-mcp.pages.dev/api/mcp", LOG_LEVEL = "info" }